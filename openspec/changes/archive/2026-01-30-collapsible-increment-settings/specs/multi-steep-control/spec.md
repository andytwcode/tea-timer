# multi-steep-control (Delta Spec)

## ADDED Requirements

### Requirement: 使用者可展開或收起增量設定區域
系統 SHALL 提供展開/收起按鈕，讓使用者控制增量設定區域的顯示狀態。

#### Scenario: 點擊展開增量設定
- **WHEN** 增量設定區域為收起狀態且使用者點擊「⚙️ 設定增量」按鈕
- **THEN** 系統展開增量設定區域，顯示分鐘和秒數輸入欄位
- **AND** 按鈕文字變更為「▲ 收起」

#### Scenario: 點擊收起增量設定
- **WHEN** 增量設定區域為展開狀態且使用者點擊「▲ 收起」按鈕
- **THEN** 系統收起增量設定區域，隱藏分鐘和秒數輸入欄位
- **AND** 按鈕文字變更為「⚙️ 設定增量 (目前：X分Y秒)」

#### Scenario: 收起狀態下顯示目前設定值
- **WHEN** 增量設定區域為收起狀態
- **THEN** 按鈕顯示「⚙️ 設定增量 (目前：X分Y秒)」，其中 X 和 Y 為目前的增量分鐘和秒數

#### Scenario: 展開狀態下顯示收起文字
- **WHEN** 增量設定區域為展開狀態
- **THEN** 按鈕顯示「▲ 收起」

### Requirement: 預設狀態為收起
系統 SHALL 在頁面首次載入時，將增量設定區域設為收起狀態，除非 localStorage 中有儲存的展開偏好。

#### Scenario: 首次載入頁面
- **WHEN** 使用者首次開啟頁面且 localStorage 無展開狀態記錄
- **THEN** 增量設定區域為收起狀態
- **AND** 按鈕顯示「⚙️ 設定增量 (目前：X分Y秒)」

#### Scenario: 載入頁面時恢復上次狀態
- **WHEN** 使用者重新開啟頁面且 localStorage 有儲存展開狀態
- **THEN** 系統恢復上次的展開/收起狀態

### Requirement: 取消連續沖泡時自動收起設定區域
系統 SHALL 在使用者取消勾選「啟用連續沖泡」時，自動收起增量設定區域（如果展開的話）。

#### Scenario: 展開狀態下取消勾選連續沖泡
- **WHEN** 增量設定區域為展開狀態且使用者取消勾選「啟用連續沖泡」
- **THEN** 系統自動收起增量設定區域

#### Scenario: 收起狀態下取消勾選連續沖泡
- **WHEN** 增量設定區域為收起狀態且使用者取消勾選「啟用連續沖泡」
- **THEN** 增量設定區域保持收起狀態（無變化）

#### Scenario: 重新勾選連續沖泡
- **WHEN** 使用者重新勾選「啟用連續沖泡」
- **THEN** 增量設定區域保持之前的展開/收起狀態（不自動展開）

### Requirement: 展開/收起按鈕僅在連續沖泡啟用時顯示
系統 SHALL 僅在連續沖泡模式啟用時顯示展開/收起按鈕。

#### Scenario: 啟用連續沖泡時顯示按鈕
- **WHEN** 使用者勾選「啟用連續沖泡」
- **THEN** 系統在連續沖泡區域右上角顯示展開/收起按鈕

#### Scenario: 未啟用連續沖泡時隱藏按鈕
- **WHEN** 使用者未勾選「啟用連續沖泡」
- **THEN** 系統不顯示展開/收起按鈕

### Requirement: 保持增量輸入功能不變
系統 SHALL 在展開狀態下保持原有的增量輸入功能，包括範圍驗證和數值限制。

#### Scenario: 展開後輸入增量分鐘
- **WHEN** 增量設定區域展開且使用者在分鐘欄位輸入數值
- **THEN** 系統按照原有邏輯驗證範圍（0-10）並更新狀態

#### Scenario: 展開後輸入增量秒數
- **WHEN** 增量設定區域展開且使用者在秒數欄位輸入數值
- **THEN** 系統按照原有邏輯驗證範圍（0-59）並更新狀態

#### Scenario: 收起狀態不影響增量值
- **WHEN** 增量設定區域為收起狀態
- **THEN** 增量分鐘和秒數的數值保持不變，不因收起而重置
